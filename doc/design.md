ssh: 光哥，整体的思路是什么样的啊，一上来就看代码比较乱

我： 模块是一个图的结构，指定从某个入口开始遍历，其实这是一个 dfs 的过程，但是有循环引用，要通过记录处理过的模块来解决。递归遍历这个图，处理到的模块就是用到的。

ssh： dfs 一个模块，怎么确定子模块呢？ 

我： 不同的模块有不同的处理方式，比如 js 模块，就要通过 import 或者 require 来确定子模块，而 css 则要通过 @import 和 url() 来确定。 但是这些只是提取路径，这个路径还是不可用的，还需要转换成真实路径，要有一个 resolve path 的过程。

ssh： resolve path 都做啥啊？

我： 就是处理 alias、过滤 node_modules 下的模块，因为我们这里用不到，然后根据当前模块的路径确定子模块的绝对路径。还要暴露出一个钩子函数去让用户能够自定义 require path 的 resolve 逻辑。

ssh： 就是那个 requireRequirePath 么？

我： 对的，那个就是暴露出去让用户自定义 path resolve 逻辑的钩子。

ssh： 我大体明白流程了？

我： 说说看

ssh： 项目的模块构成依赖图，我们要确定没有用到的模块，那就要先找出用到的模块，之后把它们过滤掉。用到的模块要用几个入口模块开始做 dfs，遍历不同的模块有不同的提取 require path 的方式，提取出来以后还要对 path 进行 resolve，得到真实路径，然后递归进行子模块的处理。这样遍历完一遍就能确定用到了哪些。同时还要处理循环引用问题，因为毕竟模块是一个图，进行 dfs 会有环在。

我： 对的，棒棒的。
